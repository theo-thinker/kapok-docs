# é™æ€èµ„æºè·¯å¾„ä¿®å¤è¯´æ˜

## ğŸ” é—®é¢˜æ ¹æœ¬åŸå› 

VitePressåœ¨é…ç½®äº†`base`è·¯å¾„åï¼Œéœ€è¦ä½¿ç”¨å®˜æ–¹æä¾›çš„`withBase`å‡½æ•°æ¥æ­£ç¡®å¤„ç†åŠ¨æ€èµ„æºè·¯å¾„ã€‚ä¹‹å‰çš„ä¿®å¤æ–¹æ³•æ˜¯é”™è¯¯çš„ï¼Œå¯¼è‡´äº†æ›´å¤šé—®é¢˜ã€‚

## âœ… æ­£ç¡®çš„ä¿®å¤æ–¹æ¡ˆ

### 1. VitePressé…ç½® (`docs/.vitepress/config.mts`)
```typescript
// ä¿æŒç®€æ´ï¼ŒVitePressä¼šè‡ªåŠ¨å¤„ç†é™æ€èµ„æº
const BASE_PATH = '/kapok-docs'

export default defineConfig({
    base: BASE_PATH,
    themeConfig: {
        logo: '/logo.svg',  // ä¸éœ€è¦æ‰‹åŠ¨æ·»åŠ baseè·¯å¾„
        // ...
    }
})
```

### 2. ä½¿ç”¨withBaseå‡½æ•° (`useTheme.ts`)
```typescript
import { withBase } from 'vitepress'

// Logoåˆ‡æ¢æ—¶ä½¿ç”¨withBase
export const switchLogo = (logoPath: string) => {
    currentLogo.value = logoPath
    
    if (typeof document !== 'undefined') {
        const logoElement = document.querySelector('.VPNavBarTitle .logo') as HTMLImageElement
        if (logoElement) {
            logoElement.src = withBase(logoPath)  // å…³é”®ä¿®å¤
        }
    }
}

// èƒŒæ™¯åˆ‡æ¢æ—¶ä½¿ç”¨withBase
watch(currentBackground, (newBg) => {
    const bgUrl = withBase(newBg)  // å…³é”®ä¿®å¤
    document.documentElement.style.setProperty('--hero-bg-image', `url('${bgUrl}')`)
})
```

### 3. Vueç»„ä»¶ä¸­ä½¿ç”¨computed (`Layout.vue`)
```vue
<script setup lang="ts">
import { computed } from 'vue'
import { withBase } from 'vitepress'

// ä½¿ç”¨computedç¡®ä¿å“åº”å¼æ›´æ–°
const backgroundSrc = computed(() => {
  return withBase(currentBackground.value)
})
</script>

<template>
  <img :src="backgroundSrc" alt="èƒŒæ™¯å›¾" />
</template>
```

### 4. ä¸»é¢˜åˆ‡æ¢å™¨ä¸­çš„å¤„ç† (`ThemeSwitcher.vue`)
```vue
<script setup lang="ts">
// æ˜¾ç¤ºç”¨çš„è·¯å¾„ï¼ˆå¸¦baseå‰ç¼€ï¼‰
const logos = computed(() => 
  LOGO_OPTIONS.map(logo => ({
    ...logo,
    path: withBase(logo.path)
  }))
)

// ä½†åˆ‡æ¢æ—¶ä»ä½¿ç”¨åŸå§‹è·¯å¾„
@click="switchLogo(LOGO_OPTIONS[index].path)"
</script>
```

## ğŸ¯ ä¿®å¤æ•ˆæœ

### Logoæ˜¾ç¤º
- âœ… å¯¼èˆªæ Logoæ­£å¸¸æ˜¾ç¤º
- âœ… ä¸»é¢˜åˆ‡æ¢å™¨é¢„è§ˆæ­£å¸¸
- âœ… Logoåˆ‡æ¢åŠŸèƒ½æ­£å¸¸

### èƒŒæ™¯å›¾æ˜¾ç¤º
- âœ… é¦–é¡µHeroèƒŒæ™¯å›¾æ­£å¸¸æ˜¾ç¤º
- âœ… èƒŒæ™¯åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- âœ… æ‰€æœ‰é¢„è§ˆå›¾æ­£å¸¸

## ğŸ“ å…³é”®è¦ç‚¹

### withBaseå‡½æ•°çš„ä½œç”¨
1. **è‡ªåŠ¨æ·»åŠ baseå‰ç¼€**ï¼š`withBase('/logo.svg')` â†’ `/kapok-docs/logo.svg`
2. **SSRå…¼å®¹**ï¼šæœåŠ¡ç«¯æ¸²æŸ“æ—¶ä¹Ÿèƒ½æ­£ç¡®å¤„ç†
3. **å¼€å‘/ç”Ÿäº§ç¯å¢ƒç»Ÿä¸€**ï¼šè‡ªåŠ¨é€‚é…ä¸åŒç¯å¢ƒ

### æ­£ç¡®çš„ä½¿ç”¨æ¨¡å¼
```typescript
// âœ… æ­£ç¡®ï¼šåœ¨éœ€è¦æ—¶è°ƒç”¨withBase
const imageSrc = computed(() => withBase(rawPath.value))

// âŒ é”™è¯¯ï¼šæå‰å¤„ç†è·¯å¾„
const imageSrc = withBase('/static/image.png')
```

### è·¯å¾„å¤„ç†åŸåˆ™
1. **å­˜å‚¨åŸå§‹è·¯å¾„**ï¼šlocalStorageå’ŒçŠ¶æ€ä¸­ä¿å­˜ä¸å¸¦baseçš„è·¯å¾„
2. **æ˜¾ç¤ºæ—¶å¤„ç†**ï¼šåœ¨DOMæ›´æ–°æ—¶ä½¿ç”¨withBase
3. **é¿å…é‡å¤å¤„ç†**ï¼šä¸è¦å¯¹å·²å¤„ç†çš„è·¯å¾„å†æ¬¡è°ƒç”¨withBase

## ğŸ”§ éƒ¨ç½²éªŒè¯

### æœ¬åœ°å¼€å‘
```bash
npm run docs:dev
# è®¿é—® http://localhost:5173/kapok-docs/
```

### ç”Ÿäº§æ„å»º
```bash
npm run docs:build
npm run docs:preview
# è®¿é—® http://localhost:4173/kapok-docs/
```

### GitHub Pages
éƒ¨ç½²åè®¿é—®ï¼š`https://username.github.io/kapok-docs/`

## ğŸš¨ é¿å…çš„é”™è¯¯

1. **ä¸è¦æ‰‹åŠ¨æ‹¼æ¥baseè·¯å¾„**
```typescript
// âŒ é”™è¯¯
const logoPath = `/kapok-docs/logo.svg`

// âœ… æ­£ç¡®
const logoPath = withBase('/logo.svg')
```

2. **ä¸è¦é‡å¤å¤„ç†è·¯å¾„**
```typescript
// âŒ é”™è¯¯ï¼šé‡å¤å¤„ç†
const processedPath = withBase(withBase('/logo.svg'))

// âœ… æ­£ç¡®ï¼šåªå¤„ç†ä¸€æ¬¡
const processedPath = withBase('/logo.svg')
```

3. **ä¸è¦åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨withBase**
```typescript
// âŒ é”™è¯¯ï¼šconfig.mtsä¸­ä¸èƒ½ä½¿ç”¨withBase
logo: withBase('/logo.svg')

// âœ… æ­£ç¡®ï¼šç›´æ¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„
logo: '/logo.svg'
```

---

**ğŸ‰ ç°åœ¨Logoå’ŒèƒŒæ™¯å›¾éƒ½åº”è¯¥èƒ½æ­£ç¡®æ˜¾ç¤ºäº†ï¼è¿™æ˜¯ä½¿ç”¨VitePresså®˜æ–¹æ¨èæ–¹æ³•çš„æ­£ç¡®ä¿®å¤ã€‚**