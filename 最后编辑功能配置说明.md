# 最后编辑功能配置说明

## ✅ 已启用功能

### 1. 最后更新时间 (`lastUpdated`)
- **功能**：在每个页面底部显示最后更新时间
- **数据源**：基于Git提交历史
- **显示文本**：`最后更新`
- **配置位置**：`docs/.vitepress/config.mts`

```typescript
// 启用最后更新时间
lastUpdated: true,
themeConfig: {
  // 启用最后更新时间显示
  lastUpdatedText: '最后更新',
}
```

### 2. 编辑链接 (`editLink`)
- **功能**：在每个页面底部显示"在 GitHub 上编辑此页"链接
- **跳转**：直接到GitHub编辑页面
- **路径模式**：`/docs/src/:path`
- **配置位置**：`docs/.vitepress/config.mts`

```typescript
// 编辑链接配置
editLink: {
  pattern: 'https://github.com/yourusername/kapok-docs/edit/main/docs/src/:path',
  text: '在 GitHub 上编辑此页'
},
```

## 🔧 重要配置

### GitHub Actions 支持
- **Git历史获取**：`fetch-depth: 0`
- **作用**：确保能获取完整的Git提交历史
- **位置**：`.github/workflows/deploy.yml`

```yaml
- name: Checkout
  uses: actions/checkout@v4
  with:
    fetch-depth: 0 # 获取完整Git历史，支持lastUpdated功能
```

## ⚠️ 需要修改的配置

### 1. GitHub仓库信息
请将以下配置中的占位符替换为实际信息：

```typescript
// 在 docs/.vitepress/config.mts 中修改：

// 1. 仓库base路径
base: '/your-actual-repo-name/', // 替换为实际仓库名

// 2. 编辑链接
editLink: {
  pattern: 'https://github.com/your-username/your-repo-name/edit/main/docs/src/:path',
  text: '在 GitHub 上编辑此页'
},

// 3. 社交链接
socialLinks: [
  {icon: 'github', link: 'https://github.com/your-username/your-repo-name'}
],
```

### 2. 替换示例
假设你的GitHub用户名是 `johnsmith`，仓库名是 `my-docs`：

```typescript
base: '/my-docs/',
editLink: {
  pattern: 'https://github.com/johnsmith/my-docs/edit/main/docs/src/:path',
  text: '在 GitHub 上编辑此页'
},
socialLinks: [
  {icon: 'github', link: 'https://github.com/johnsmith/my-docs'}
],
```

## 🎯 功能效果

### 页面底部显示
每个文档页面底部将显示：
1. **最后更新时间**：如 "最后更新: 2025年9月15日 14:30"
2. **编辑链接**：点击"在 GitHub 上编辑此页"直接跳转到GitHub编辑

### 工作原理
1. **lastUpdated**：VitePress读取Git历史，获取文件最后修改时间
2. **editLink**：根据当前页面路径生成对应的GitHub编辑URL

## 🔍 验证功能

### 本地测试
```bash
# 开发模式（可能不显示lastUpdated）
npm run docs:dev

# 构建预览（完整功能）
npm run docs:build
npm run docs:preview
```

### 生产环境
- 部署到GitHub Pages后，访问任意文档页面
- 检查页面底部是否显示最后更新时间和编辑链接

## 📝 注意事项

1. **Git历史依赖**：`lastUpdated` 功能需要Git仓库和提交历史
2. **开发模式限制**：本地开发时可能不显示更新时间
3. **路径匹配**：编辑链接的路径模式必须与实际文件结构匹配
4. **权限要求**：用户需要有仓库编辑权限才能通过编辑链接修改文件

---

**🎉 最后编辑功能已成功配置！记得更新GitHub仓库信息。**